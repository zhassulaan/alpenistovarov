{"ast":null,"code":"var _jsxFileName = \"/Users/zhassik/Downloads/yaq/front/src/context/Context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useReducer, useEffect } from \"react\";\n// import productData from \"../data/product_data\";\nimport { cartReducer } from \"./Reducers\";\nimport { UserState } from \"./UserContext\";\nimport { fetchAllProducts } from \"../http/catalogAPI\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getLocalStorageCart = () => {\n  let cart = localStorage.getItem(\"cart-items\");\n  if (cart) {\n    return JSON.parse(localStorage.getItem(\"cart-items\"));\n  } else {\n    return [];\n  }\n};\nconst getLocalStorageSaved = () => {\n  let saved = localStorage.getItem(\"saved-items\");\n  if (saved) {\n    return JSON.parse(localStorage.getItem(\"saved-items\"));\n  } else {\n    return [];\n  }\n};\nconst Cart = /*#__PURE__*/createContext();\nfunction Context(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const {\n    user,\n    setUser,\n    users,\n    setUsers\n  } = UserState();\n  // const { rows } = fetchAllProducts();\n  // console.log(rows);\n  // const productData = rows;\n  // const products = productData?.map((product, index) => ({\n  //   id: productData[index].id,\n  //   name: productData[index].name,\n  //   price: productData[index].price,\n  // currency: productData[index].currency,\n  // image: productData[index].image,\n  // images: productData[index].images,\n  // sale: productData[index].sale,\n  // brands: productData[index].brands,\n  // material: productData[index].material,\n  // characteristic1: productData[index].characteristic1,\n  // characteristic2: productData[index].characteristic2,\n  // saved: productData[index].saved,\n  // type: productData[index].type,\n  // category: productData[index].category,\n  // item: productData[index].item,\n  // gender: productData[index].gender,\n  // colors: productData[index].colors,\n  // color: productData[index].color,\n  // sizes: productData[index].sizes,\n  // size: productData[index].size,\n  // }));\n\n  const [state, dispatch] = useReducer(cartReducer, {\n    // products: products,\n    cart: getLocalStorageCart(),\n    saved: user !== null && user !== void 0 && user.auth ? user.saved : [],\n    saved: getLocalStorageSaved()\n  });\n  useEffect(() => {\n    localStorage.setItem(\"cart-items\", JSON.stringify(state.cart));\n    localStorage.setItem(\"saved-items\", JSON.stringify(state.saved));\n    let saved = JSON.parse(localStorage.getItem(\"saved-items\"));\n    setUser(item => ({\n      ...item,\n      saved: saved\n    }));\n    if (user.auth === true) {\n      const currentUser = users.find(element => element.email === user.email);\n      const currentUsers = users;\n      for (var i = 0; i < users.length; i++) {\n        currentUsers[i] = users[i];\n        if (currentUser.id === users[i].id) {\n          currentUsers[i].saved = saved;\n        }\n      }\n      setUsers(currentUsers);\n    }\n  }, [state.cart, state.saved]);\n  return /*#__PURE__*/_jsxDEV(Cart.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 10\n  }, this);\n}\n_s(Context, \"ocdYywzMUJsuDusstZg6hbDi1U8=\");\n_c = Context;\nexport const CartState = () => {\n  _s2();\n  return useContext(Cart);\n};\n_s2(CartState, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n_c2 = CartState;\nexport default Context;\nvar _c, _c2;\n$RefreshReg$(_c, \"Context\");\n$RefreshReg$(_c2, \"CartState\");","map":{"version":3,"names":["createContext","useContext","useReducer","useEffect","cartReducer","UserState","fetchAllProducts","getLocalStorageCart","cart","localStorage","getItem","JSON","parse","getLocalStorageSaved","saved","Cart","Context","children","user","setUser","users","setUsers","state","dispatch","auth","setItem","stringify","item","currentUser","find","element","email","currentUsers","i","length","id","CartState"],"sources":["/Users/zhassik/Downloads/yaq/front/src/context/Context.js"],"sourcesContent":["import { createContext, useContext, useReducer, useEffect } from \"react\";\n// import productData from \"../data/product_data\";\nimport { cartReducer } from \"./Reducers\";\nimport { UserState } from \"./UserContext\";\nimport { fetchAllProducts } from \"../http/catalogAPI\";\n\nconst getLocalStorageCart = () => {\n  let cart = localStorage.getItem(\"cart-items\");\n  if (cart) {\n    return JSON.parse(localStorage.getItem(\"cart-items\"));\n  } else {\n    return [];\n  }\n};\nconst getLocalStorageSaved = () => {\n  let saved = localStorage.getItem(\"saved-items\");\n  if (saved) {\n    return JSON.parse(localStorage.getItem(\"saved-items\"));\n  } else {\n    return [];\n  }\n};\n\nconst Cart = createContext();\n\nfunction Context({ children }) {\n  const { user, setUser, users, setUsers } = UserState();\n  // const { rows } = fetchAllProducts();\n  // console.log(rows);\n  // const productData = rows;\n  // const products = productData?.map((product, index) => ({\n  //   id: productData[index].id,\n  //   name: productData[index].name,\n  //   price: productData[index].price,\n  // currency: productData[index].currency,\n  // image: productData[index].image,\n  // images: productData[index].images,\n  // sale: productData[index].sale,\n  // brands: productData[index].brands,\n  // material: productData[index].material,\n  // characteristic1: productData[index].characteristic1,\n  // characteristic2: productData[index].characteristic2,\n  // saved: productData[index].saved,\n  // type: productData[index].type,\n  // category: productData[index].category,\n  // item: productData[index].item,\n  // gender: productData[index].gender,\n  // colors: productData[index].colors,\n  // color: productData[index].color,\n  // sizes: productData[index].sizes,\n  // size: productData[index].size,\n  // }));\n\n  const [state, dispatch] = useReducer(cartReducer, {\n    // products: products,\n    cart: getLocalStorageCart(),\n    saved: user?.auth ? user.saved : [],\n    saved: getLocalStorageSaved(),\n  });\n\n  useEffect(() => {\n    localStorage.setItem(\"cart-items\", JSON.stringify(state.cart));\n    localStorage.setItem(\"saved-items\", JSON.stringify(state.saved));\n    let saved = JSON.parse(localStorage.getItem(\"saved-items\"));\n    setUser((item) => ({\n      ...item,\n      saved: saved,\n    }));\n    if (user.auth === true) {\n      const currentUser = users.find((element) => element.email === user.email);\n      const currentUsers = users;\n      for (var i = 0; i < users.length; i++) {\n        currentUsers[i] = users[i];\n        if (currentUser.id === users[i].id) {\n          currentUsers[i].saved = saved;\n        }\n      }\n      setUsers(currentUsers);\n    }\n  }, [state.cart, state.saved]);\n\n  return <Cart.Provider value={{ state, dispatch }}>{children}</Cart.Provider>;\n}\n\nexport const CartState = () => {\n  return useContext(Cart);\n};\n\nexport default Context;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}